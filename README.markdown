# Comisor Viewer

Sep 2010 ys

[下载最新版](http://ysmood.org/upload/comisor/comisor.zip).

#### 支持的图片格式：

BMP、GIF、JPG、PNG、TIFF、ICO、WDP 和 PSD，支持GIF、TIFF、PSD多图层分页浏览。

#### 其他解码器：

如果想浏览 PSD 文件，可以运行 PSDCodec 目录下的“安装和卸载.bat”文件。

#### 其他：

灵活的滚轮操作和简洁的UI，最大限度的利用屏幕空间。
灵活的惯性拖放操作。
适用于低质量漫画扫图批量观看的“自动色阶”功能。
穿越多级文件夹的“群集浏览”功能。
分别应对日式和美式漫画浏览顺序的“边角固定”和“全页/半页分割浏览”功能。

***************************************************************************************************************

## 鼠标操作


**注：按照越常用排序越靠前，并且越不常用的功能越难被误启动**

1.滚动滚轮，进行前后图片的导航，频率高于3Hz，会启用飞滚模式；

2.左键用于拖拽图片；

3.按住右键同时拖动一段距离后松开：向上拖动切换到原始大小，向下拖动切换到最佳视图；

4.按住右键同时滚动滚轮，进行比例缩放，频率高于6Hz，会启用加速度；

5.按住左键再单击右键，开启/关闭图片信息框，信息框也可被拖动到任意位置；

6.单击右键，调出参数选单；

7.单击鼠标滚轮，或按住左键或者右键，再双另一个按键，当松开右键后，退出；

8.双击图片，退出并打开图片所在的文件夹，并选中此图片；

9.将图片或文件夹拖放到已经开启的图片，将自动检索可用的图片替换当前图片；

10.按住左键同时滚动滚轮，在单张图片的多个图层之间导航；

11.如果鼠标有侧键，在图层数小于2时，导航图片，否则导航图层。

***************************************************************************************************************

## 键盘操作


**F1**         显示帮助框

**F2**         显示/隐藏图片信息框

**F5**         从新载入图片

**F11**        在全屏和普通模式间切换

**DEL**        删除当前图片到回收站（默认为安静模式）

**ESC**        退出

**\***          缩放到适应屏幕(小键盘)

**F**          缩放到适应屏幕

**/**          缩放到原始尺寸(小键盘)

**O**          缩放到原始尺寸

**+**          放大

**-**          缩小

**B**          添加新的书签

**C**          将图片数据复制到剪切板

**S**          将当前图片另存为指定格式

**M**          开启/关闭小型鼠标光标

**L**          开启/关闭自动色阶

**P**          播放GIF动画

**R**          顺时针旋转90度

**H**          水平翻转

**V**          垂直翻转

**Z**          复位矩阵变化，并缩放到适应屏幕

**T**          开启/关闭窗口置顶

**W**          显示/隐藏窗口

**空格**       导航到下张

**光标右**     导航到下张

**光标左**     导航到前张

**光标下**     导航到下图层

**光标上**     导航到上图层

***************************************************************************************************************

## 右键选单

* 适应桌面 / 锁定尺寸：

* 适应桌面：切换图片时自动缩放并居中，最大限度的利用桌面空间。

* 锁定图片：可以用滚轮选择锁定[尺寸]或[缩放]。

* 群集浏览：

* 开启/关闭浏览当前文件所在的文件夹的父级文件夹的所有子文件夹中的文件。

* 包括隐藏文件夹和没有后缀名的文件，Comisor会自动判断是否为支持的图片格式。

* 并智能排序。


举个例子，有下面这样一组文件夹：

![image](https://raw.github.com/ysmood/Comisor/master/Comisor/doc/image002.gif)

已经打开了“第03巻”中的图片“01.jpg”

![image](https://raw.github.com/ysmood/Comisor/master/Comisor/doc/image004.gif)

如果开启群集浏览。那么就可以一次性的浏览“World Embryo”文件夹中的所有文件夹。

此时信息框会额外显示“群”字。


--------------------------------------------------------------------------

#### 固定边角：

    切换到下一张图片时，将选定的参考点固定到指定的位置。
    
    共有四个候选参考点，按顺序：图片左上角，图片右上角，图片左下角，图片右下角。
    
    用滚轮选择参考点，如阅读日式漫画时参考点一般设为[右上]，即总能从右上角开始观看图片。
    
    此选择被激活的瞬间会记录当前选中的参考点的位置。

#### 全页/半页浏览：

    半页浏览即将一张图片沿竖直方向分割成两部分阅读，可以再设置中调整分割的比例。

    [ 智能 ] 选项选中时，只有图片宽度大于高度时才会被分割。

    半页浏览模式开启后会自动开启鼠标水平方向“防抖动”功能。

#### 书签设置：

    单击“加号按钮”添加书签，“减号按钮”删除书签，右键单击书签，可修改注释。

#### 自动色阶：

    切换到下张图片时是否先自动映射色阶到满射。
    
    通常适用于低质量黑白漫画扫图的批量观看。
    
    明度的取值按照 C = （0.299R, 0.587G, 0.114B） 的方式为每个通道加权，保留透明度信息。

#### 文件关联：

    关联后会使用 File Icon 文件夹中的图片作为默认的格式图标。
    
    取消关联并点击确认后，会自动清除Comisor对注册表做过的修改，并恢复系统关联。

#### 背景透明：

    开启时，设置背景的透明度，关闭时无背景。

#### 阴影半径：

    对于半透明的png，psd等格式的文件，可适时关闭其边缘阴影，以便边缘细节的观察。

#### 缩放阈值：

    关闭非破坏性缩放渲染的阈值。
    
    如设置为 3 时，图像放大三倍以上后会关闭“两次立方插值”，此时会使用“邻近插值”算法。
    
    通常不必关注这个选项，一般浏览小型图片和具有象素精度级别纹路的图片会将这个值设定得很小。
    
#### 分割比例：

    分割页面的分割线对应页面位置的比例。

#### 浮力系数：

    惯性缓动设置，浮力越大摩擦力越小。
    
    缓动能快速灵活的移动大型图片。
    
    若PC性能不佳，可以将其值减小。

#### 缓动系数：

    缓动速度的迭代衰减值。为了便于快速移动大型图，可以将这个值增加。
    
    “缓动系数”和“浮力系数”的区别在于，图片体积越大其受到的浮力也越大，“缓动系数”则不会。

**注：单击“参数设置”的图标可打开“参数设置.xml” 文件所在的文件夹。**

***************************************************************************************************************

## 命令行参数

1.[路径]    如果路径指向文件，则打开指定文件，

    如果路径指向文件夹，则检索指定文件夹中所有子文件夹，并打开找到的第一张图片文件。       

2.–a

    以文件关联器启动。

3.–b[索引号|书签名]

    打开具有指定索引号或书签名的书签，如：“-b2”将打开第2个书签，“-b天空”将打开具有“天空”这个名字的书签。
    
    另外“-b”会打开最后一次浏览的图片。

4.–c

    以群集浏览启动。

5.–f[x,y,w,h]
    
    启动时将图片设置到指定位置和指定大小，x、y、w、h 均为正整数。
    
    x、y 为左上角相对桌面左上角的坐标，w、h 为最大长宽。如：“-f10,10,800,600”。

6.–g[0|1]
    
    启动时是否开启背景。“-g”或“-g1”开启背景，“-g0”关闭背景。

7.–l
    
    以自动色阶启动。

***************************************************************************************************************

## 关于 “参数设置.xml” 文件

1.会在第一次关闭后自动生成“参数设置.xml”文件；

2.“群集浏览”“自动色阶”每次启动会自动关闭，以免花费过多时间启动程序。但可以用加了对应运行参数的快捷方式启动程序；

3.“背景颜色”“外框颜色”“信息栏色” “色阶阈值”“通道权值”和“字体颜色”是只能在“参数设置.xml”文件中才能修改的属性，遵循一般ARGB赋值方式；

4.如果不想要外边框的边界提示，可以将数值设为“#0000”，即完全透明（边界提示用于防止带透明度的不规则图形移动到边缘时消失的假象）；

5.“Language”节点下为本程序出现的全部字符串，可以通过修改此节点中各属性的值来修改程序中UI中出现的文字（说明文档不属于UI部分）。

***************************************************************************************************************

## 关于 Comisor Project

Comisor 是 comic 和 translator 的合成词。

它的主要目的是加速和简化漫画的翻译流程，并实现外嵌漫画字幕观看。

主要分为 Viewer，Editor（制作中） 和 Transfer（筹划中）三部分。

